require 'spec'
require "lib/masstransit"

describe "New consumer" do

  before(:each) do
    @consumer = MassTransit::Consumer.new lambda { |msg| 
      if msg == 1
        return lambda {|m| @test = msg }
      end
    }
  end

	it "should consume messages" do
    @consumer.consume 1
    @test.should == 1
	end
	
	it "should allow selectivity" do
	  @consumer.consume 2
	  @test.should == nil
  end

end
